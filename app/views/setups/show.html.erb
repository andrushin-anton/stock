<% content_for :title, @setup.name + ' ' + @setup.datetime.strftime('%B %d, %Y') + ' ' + @setup.direction + ' | Finance Assistant' %>
<div class="page-header">
  <h1><%= @setup.name %> <small><%= @setup.datetime.strftime('%B %d, %Y') %></small></h1>
</div>
<br>
<table class="table table-show">
<tr>
  <td>Symbol: <strong><%= @setup.symbol %></strong></td><td>&nbsp;</td><td>Pattern: <strong><%= @setup.pattern %></strong></td></td><td>&nbsp;</td><td>Exchange: <strong><%= @setup.item.market %></strong></td>
</tr>
<% levels = JSON.parse @setup.levels %>
  <% levels.each do |level| %>
      <% if level.has_key?('buy_stop') || level.has_key?('stop_loss') %>
          <tr>
            <% if level.has_key?('buy_stop')%><td>Buy Stop: <strong><%= level['buy_stop'].round(2) %></strong></td><td>&nbsp;</td><% end %><% if level.has_key?('stop_loss') %><td>Stop Loss: <strong><%= level['stop_loss'].round(2) %></strong></td><% end %><td>&nbsp;</td><td>&nbsp;</td>
          </tr>
      <% end %>
      <% if level.has_key?('sell_stop') %>
          <tr>
            <td>Sell Stop: <strong><%= level['sell_stop'].round(2) %></strong></td><td>&nbsp;</td><td>Stop Loss: <strong><%= level['stop_loss'].round(2) %></strong></td><td>&nbsp;</td><td>&nbsp;</td>
          </tr>
      <% end %>
  <% end %>
</table>
<h4><%= @setup.direction%></h4>
<p>
  <%= @setup.levels %>
</p>
<div>
  <%= render :partial => 'highchart', :locals => { :setup => @setup, :width => '100%', :height => '650px', :selected => 1 } %>
</div>
<br>
<p>
  <strong><%= @setup.pattern_object.name %></strong> - <%= @setup.pattern_object.description %>
</p>